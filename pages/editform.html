<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>review FORM</title>
  <link rel="stylesheet" href="../assests/style.css/reviewform.css">
</head>

<body>
  <form id="form">
    <div class="inputBox">
      <input id="im_g" type="text" name="" required="required" />
      <span>Image Url</span>
    </div>
    <div class="inputBox">
      <input id="dname" type="text" name="" required="required" />
      <span>Patient Name</span>
    </div>
    <div class="inputBox">
      <input id="Sp_l" type="text" name="" required="required" />
      <span>illness</span>
    </div>
    <div class="inputBox">
      <input id="tx_t" type="text" name="" required="required" />
      <span>Text</span>
    </div>
    <button type="submit" class="btn5">Send</button>

    <button type="submit" id="editer" class="btn5">edit</button>
    
    
  </form>
  <button type="submit" id="del" onclick="delData()" class="btn5">Delete</button>
  <script>

    //  url params 

    let get_id = window.location.search
    let id_params = new URLSearchParams(get_id);
    let get_card_id = id_params.get("id");

    let get_details = JSON.parse(localStorage.getItem("review"));

    let get_one = get_details.find(function (get) {
      if (get_card_id == get["uuid"]) {
        return true;
      }
    });


    let imgage = document.getElementById("im_g");
    imgage.value = get_one["im_g"] 


    let names=document.getElementById("dname");
    names.value=get_one["dname"]


    let ill=document.getElementById("Sp_l");
    ill.value=get_one["Sp_l"]
   
      
      let para =document.getElementById("tx_t");
      para.value=get_one["tx_t"]
  
      let pForm = document.getElementById("form");
      pForm.addEventListener("submit", function (event) {
        event.preventDefault();
      
      
        let image_url = document.getElementById("im_g").value;
        let patient_name = document.getElementById("dname").value;
        let illness = document.getElementById("Sp_l").value;
        let text = document.getElementById("tx_t").value;
        
        let newData = { image_url, patient_name, illness, text };
        console.log(newData)
        let combinedData = Object.assign(get_one, newData);
        console.log(combinedData);
        let findIndex = get_details.indexOf(get_one);
        console.log(findIndex);
        get_details[findIndex] = combinedData;
        localStorage.setItem("review", JSON.stringify(get_details));
        
        alert("successfully changed");
        // window.open("/pages/company logo.html")
      });



  </script>

</html>