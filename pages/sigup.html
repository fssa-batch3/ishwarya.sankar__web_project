<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login page</title>
    <link rel="stylesheet" href="../assests/style.css/sigin.css">
</head>
<body>
    <div class="main">  	
		<input type="checkbox" id="chk" aria-hidden="true">
			<div class="signup">
				<form name="app" id="signup">
					<label for="chk">Sign Up</label>
					<input type="text"  name="reqname"id="txt" placeholder="User name" pattern="[a-z]{6}">
					<input type="email" name="reqemail" id="email" placeholder="Email">
					<input type="password" name="reqpass" id="pswd" placeholder="Password"  title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"> 
					<input type="password" name="repass" id="cpswd" placeholder="Password"  title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"> 
						<select name="cars" class="Proffession" id="txt">
						  <option value="volvo">Doctor</option>
						  <option value="saab">Patient</option>
						</select>
					<button type="submit"  id="signin">Sign up</button>
					<button type="submit"  id="signin">Log In</button>
					
				</form>
			</div>

	</div>
	<script>
//declaring array outside because every time object to be stored inside the array
                        let main=[];
//function call						
// declaring fucntion
					 document.getElementById("signin").onclick = function(e){
							e.preventDefault()
						// declaring variables to get value from the input box by getelementbyid
                         const name=document.getElementById("txt").value.trim()
	                     const email =document.getElementById("email").value.trim()
 		                  const pass=document.getElementById("pswd").value.trim()
						  const pass2=document.getElementById("cpswd").value.trim()
						// declaring an object
						  let object=new Object();
						  object["username"]=name;
						  object["useremail"]=email;
						  object["userpassword"]=pass;
						  object["userconfirmpass"]=pass2;
						
						  console.log(main);
						//   window.localStorage.setItem("obj",JSON.stringify(main));
	 					  if (pass != pass2) {
                          alert("Password Doesn't Match");
		
                         }


		
		    let cort = JSON.parse(window.localStorage.getItem("obj"));

	        let match=false;
		    for (i=0;i<cort.length;i++){

            if(email==cort[i].useremail){
			match=true
	 		break
	 	    }
 }
	
   if(match==true){
 	alert("already exist");
   }
	  else{

		if(window.localStorage.getItem("obj")===null){
	 						window.localStorage.setItem("obj",JSON.stringify( main));
							console.log(obj)
	 					  }
					     else{
							     let users=window.localStorage.getItem("obj");
	 								 let userjs=JSON.parse(users);
								 userjs.push(object);
								 localStorage.removeItem("obj")
								 window.localStorage.setItem("obj",JSON.stringify(userjs));
							 }


	  }
	}
	</script>
 </body>
 </html>