<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login page</title>
    <link rel="stylesheet" href="../assests/style.css/sigin.css">
</head>
<body>
    <div class="main">  	
		<input type="checkbox" id="chk" aria-hidden="true">
			<div class="signup">
				<form name="app" id="signup">
					<label for="chk">Sign Up</label>
					<input type="text"  name="reqname"id="txt" placeholder="User name" pattern="[a-z]{6}" required>
					<input type="email" name="reqemail" id="email" placeholder="Email" required>
					<input type="number" name="reqemail" id="mble" placeholder="phone number" required>
					<input type="text" name="reqpass" id="swd" placeholder="address"  title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required> 
					<input type="password" name="reqpass" id="pswd" placeholder="confirmpassword"  title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required> 
					<input type="password" name="repass" id="cpswd" placeholder="Password"  title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required> 
						<select name="cars" class="Proffession" id="txt2">
						  <option value="Doctor" id="doc">Doctor</option>
						  <option value="Patient" id="patient">Patient</option>
						  <option value="Patient" id="seller">Seller</option>
						</select>
					<button type="submit"  id="signin">Sign up</button>
				</form>
			</div>

	</div>
	<script>
//declaring array outside because every time object to be stored inside the array
                       
//function call						
// declaring fucntion
let main=[];
					 document.getElementById("signin").onclick = function(e){
							e.preventDefault();
						// declaring variables to get value from the input box by getelementbyid
                         const name=document.getElementById("txt").value.trim()
	                     const email =document.getElementById("email").value.trim()
						 const address =document.getElementById("swd").value.trim()
 		                  const pass=document.getElementById("pswd").value.trim()
						  const pass2=document.getElementById("cpswd").value.trim()
						  const doctors=document.getElementById("txt2").value.trim()
						  const phonenumber=document.getElementById("mble").value.trim()
						  let id = self.crypto.randomUUID();
						  console.log(id);
						//   const pat=document.getElementById("patient").value.trim()
						// declaring an object
						  let object=new Object();
						  object["username"]=name;
						  object["useremail"]=email;
						  object["userpassword"]=pass;
						  object["userconfirmpass"]=pass2;
						  object["address"]=address;
						  object["doctors"]=doctors;
						  object["mobilenumber"]=phonenumber;
						  object["id"]=id;
		// 				  main.push(object);
						  
		// 				  window.localStorage.setItem("obj",JSON.stringify(main));

        //     if (window.localStorage.getItem("obj") === null) {
        //         window.localStorage.setItem("obj", JSON.stringify(main));
        //     } else {
        //         let local = window.localStorage.getItem("obj");
        //         let json = JSON.parse(local);
        //         json.push(object);
        //         window.localStorage.setItem("obj", JSON.stringify(json));
        //     }
        //     window.location.href = "./login.html";
        // };


		if(object["pass"]===object["pass2"]){
			main.push(object)
		}else{
			alert("password doesn't match")
		}
                if(window.localStorage.getItem("obj")===null){
					window.localStorage.setItem("obj",JSON.stringify(main));
				}
				else{
					let local=window.localStorage.getItem("obj");
					let json=JSON.parse(local);
					json.push(object);
					window.localStorage.setItem("obj",JSON.stringify(json));
				}
				window.location.href = "./login.html"
						
							 
// if(document.getElementById("txt2").value === "Doctor"){
// 	window.location.href = "./login.html"
// }else{
// 	window.location.href = "./login.html"
	
// }
 } //id//
	</script>
 </body>
 </html>