<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../assests/style.css/newappo.css" />
    <link rel="stylesheet" href="../assests/style.css/STYLE.css">
  </head>
  <body>
    <div class="navbar">
       
      <li><a href="../pages/about.html">About</li></a>
      <li><a href="../pages/service.html">Service</li></a> 
      <li><a href="../pages/product.html">Medicines</li></a>
      <li><a href="../pages/online.html">Expert</li></a>
      <li><a href="../pages/home.html">Review</li></a>
      <li><a href="../pages/appoin.html">Appoinment</li></a>
      <li><a href="../pages/sigup.html">Signup</li></a>
      <li><a href="../pages/startingpage.html">Admin</a></li>
  </div>









    <div class="Whole_card"></div>
  </body>
  <script>
    let Whole_card = document.querySelector("div.Whole_card");
    let card_details = JSON.parse(
      window.localStorage.getItem("appointments_arr")
    );
    for (let i = 0; i < card_details.length; i++) {
      let single_card = document.createElement("div");
      single_card.setAttribute("class", "single_card");
      Whole_card.append(single_card);
      //firstname//
      let firstNameP1 = document.createElement("p");
      firstNameP1.innerHTML = "FirstName : " + card_details[i]["fullname"];
      single_card.append(firstNameP1);
      //email//
      let email = document.createElement("p");
      email.innerHTML = "Email : " + card_details[i]["email"];
      single_card.append(email);
      //number//
      let mobile = document.createElement("p");
      mobile.innerHTML = "Phone Number : " + card_details[i]["phonenumber"];
      single_card.append(mobile);
      //city//
      let citys = document.createElement("p");
      citys.innerHTML = "City : " + card_details[i]["city"];
      single_card.append(citys);
      //address
      let addres = document.createElement("p");
      addres.innerHTML = "Address: " + card_details[i]["address"];
      single_card.append(addres);
      //date
      let date1 = document.createElement("p");
      date1.innerHTML = "Date : " + card_details[i]["date"];
      single_card.append(date1);
      //time
      let time1 = document.createElement("p");
      time1.innerHTML = "time : " + card_details[i]["time"];
      single_card.append(time1);
      //suffering from//
      let suffer = document.createElement("p");
      suffer.innerHTML = "Suffering : " + card_details[i]["suffering"];
      single_card.append(suffer);
      //Specialist to go//
      let Specialist = document.createElement("p");
      Specialist.innerHTML = "Specialist : " + card_details[i]["specialist"];
      single_card.append(Specialist);
      //cancel appoinment//
      
      let cancelbtn = document.createElement("button");
      cancelbtn.setAttribute("uuid", card_details[i]["uuid"]);
      cancelbtn.innerHTML = "Cancel";
      cancelbtn.setAttribute("id", "cancel");
      single_card.append(cancelbtn);
      cancelbtn.addEventListener("click", function () {
          if (confirm("Are you sure?")) {
            let jsonData = JSON.parse(
              window.localStorage.getItem("appointments_arr")
            );
            let uuid = cancelbtn.getAttribute("uuid");
            console.log(uuid);
            let indexOf = jsonData.findIndex((obj) => obj.uuid === uuid);
            console.log(indexOf);
            jsonData.splice(indexOf, 1);
            window.localStorage.setItem(
              "appointments_arr",
              JSON.stringify(jsonData)
            );
            window.location.href = "../pages/newappo.html";
          }
        });
      }
  </script>
</html>