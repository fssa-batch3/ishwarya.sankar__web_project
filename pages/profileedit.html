<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../assests/style.css/edit.css">
</head>
<body>
 <form id="saveEdit">
 <div class="containermain">
  <div class="input"><label>Name:</label><input id="name" type="text" maxlength="20"></div>
  <!-- <div class="input"><label >Mobile-Number:</label><input id="phno"  type="number" maxlength="10"></div> -->
  <div class="input"><label >Email:</label><input id="email"  type="email" disabled ></div>
  <div class="input"><label >Password:</label><input id="password"  type="password" ></div>
  <!-- <a class="inputs" href="../pages/appoin.html"> -->
    <button type="submit"  class="btn">Save</button>
    <button onclick="Delete" id ="delete" class="btn">Delete</button>

  </form>
  <!-- </a> -->
    
  












</body>
<script>
     let profile=JSON.parse(localStorage.getItem("obj"));
     let mail = JSON.parse(localStorage.getItem("data"))
    //  let data = profile.find((F) => F.useremail == mail)
    //       console.log(profile);

    let data = profile.find(function (obj){
      let email =obj["useremail"]
      if(mail == email){
        return true
      }
    } )
          console.log(profile);


          document.getElementById("name").value=data["username"];
          document.getElementById("email").value=data["useremail"];
          document.getElementById("password").value=data["userpassword"]

//validation
          let save = document.getElementById("saveEdit");
          save.addEventListener("submit",(event) => {
              event.preventDefault();

              let useremail = document.getElementById("email").value;
              let username = document.getElementById("name").value;
              let userpassword = document.getElementById("password").value;

              let newData = {
                useremail,username,userpassword
              }
              console.log(newData)
              if (mail != useremail) {
          alert("You can't change the Email ID");
        } else {
          let update = Object.assign(data, newData);
          console.log(update);
          let index = profile.indexOf(data);
          console.log(index);
          profile[index] = update;
          localStorage.setItem("obj", JSON.stringify(profile));
          window.location.href ="/index.html"
          // alert("You have successfully updated your account details!");
        }
      });
      let info = document.getElementById("delete");
      info.addEventListener("click", function (event) {
        event.preventDefault();
        let indexof = profile.indexOf((data));
        let failed = confirm("Delete this");
        if (failed !== true) {
          return;
        } else {
          profile.splice(indexof, 1);
          localStorage.setItem("obj", JSON.stringify(profile));
        }
          });
            
              
           

      
</script>
</body>
</html>
